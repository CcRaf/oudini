%! Author = ACA
%! Date = 11-Sep-21

% Preamble
\documentclass[a4paper]{report}
\usepackage[margin=0.75in]{geometry}

% Packages
\usepackage{float}
\usepackage{titlesec}

% Utilities
\input{utils}
\input{env_template}

% Generated constants
\input{snip/constants}

% Glossary generation
\input{snip/glossary} % TODO: from XML?


\newglossarystyle{clong}{%
 \renewenvironment{theglossary}%
     {\begin{longtable}{p{.3\linewidth}p{\glsdescwidth}}}%
     {\end{longtable}}%
  \renewcommand*{\glossaryheader}{}%
  \renewcommand*{\glsgroupheading}[1]{}%
  \renewcommand*{\glossaryentryfield}[5]{%
    \glstarget{##1}{##2} & ##3\glspostdescription\space ##5\\}%
  \renewcommand*{\glossarysubentryfield}[6]{%
     & \glstarget{##2}{\strut}##4\glspostdescription\space ##6\\}%
  %\renewcommand*{\glsgroupskip}{ & \\}%
}


% Document
\begin{document}
    % First page
    \input{titlepage}

    \tableofcontents
    \pagebreak

    \listoffigures
    \pagebreak

    \listoftables
    \pagebreak

    \level{0}{Introduction}
    \level{1}{Purpose of the document}
    \blindtext[1]

    \level{1}{Document overview}

    This document is a \acrfull{srd}. The purpose of a \acrshort{srd} can be found in section \ref{glossary}.

    \level{1}{Acronyms and abreviations}\label{glossary}
%    \printglossary[style=long-booktabs]
    \printglossary[style=clong]
    \printglossary[type=\acronymtype]

    \level{0}{Documents}
    \level{1}{Applicable documents}
    \blindtext[1]

    \level{1}{Reference documents}
    \blindtext[1]

    \level{1}{Project reference documents}
    \blindtext[1]

    \level{0}{General description}
    \level{1}{Software item description}\label{software-item-description}

    The \gls{software} is described here.

    \level{1}{Function and purpose}
    \blindtext[1]

    \level{1}{General constraints}
    \blindtext[1]

    \level{1}{Model description}

    See figure~\ref{fig:architecture-diagram}.

    \begin{figure}[H]
    \includegraphics{architecture.png}
    \caption{Architecture diagram for SW.COMP1}
    \centering\label{fig:architecture-diagram}
    \end{figure}

    \blindtext[1]


    \level{0}{Specific requirements}

    \level{1}{Functionnal requirements}

    \level{2}{Input commands}

    \blindtext[1]

    \input{snip/SRD-REQ-00001}

    Note: see \ref{software-item-description} for details about this command.

    \level{2}{Performance requirements}
    \blindtext[1]

    \level{2}{Interface requirements}
    \blindtext[1]

    \input{snip/SRD-REQ-80000}
    Du texte en dessous pour pr√©ciser
    Une table...

    \level{2}{Operationnal requirements}
    \level{3}{Versionning}
    \input{snip/SRD-REQ-01000}

    \level{0}{Verification and validation}
    \level{1}{Requirements}
    \blindtext[1]

    \level{1}{Methods}
    \blindtext[1]

    \level{0}{Tracability matrices}\label{tracability-matrices}

    Test test
%    \input{snip/matrix_to_SP-PIDS}
%    \input{snip/SRD-REQ-00001.tex_table}

\end{document}
